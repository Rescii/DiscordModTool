ps://sentry.io/api/146342/minidump/?sentry_key=${sentryKey}`,
    uploadToServer: true,
    ignoreSystemCrashHandler: false,
    extra: flat_metadata
  };
}

function initializeSentrySdk(sentry) {
  sentry.init({
    dsn: DESKTOP_JS_SENTRY_DSN
  });
}

function init(buildInfo, sentry) {
  if (initialized) {
    console.warn('Ignoring double initialization of crash reporter.');
    return;
  } // It's desirable for test runs to have the stacktrace print to the console (and thusly, be shown in buildkite logs).


  if (process.env.ELECTRON_ENABLE_STACK_DUMPING === 'true') {
    console.warn('Not initializing crash reporter because ELECTRON_ENABLE_STACK_DUMPING is set.');
    return;
  }

  if (sentry != null) {
    initializeSentrySdk(sentry);
  }

  metadata['channel'] = buildInfo.releaseChannel;
  const sentryMetadata = metadata['sentry'] != null ? metadata['sentry'] : {};
 